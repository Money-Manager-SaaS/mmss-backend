--
-- PostgreSQL database dump
--

-- Dumped from database version 9.6.17
-- Dumped by pg_dump version 9.6.17

-- Started on 2020-04-24 19:01:22

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 1 (class 3079 OID 12387)
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- TOC entry 2190 (class 0 OID 0)
-- Dependencies: 1
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


SET default_tablespace = '';

SET default_with_oids = false;

--
-- TOC entry 189 (class 1259 OID 16448)
-- Name: account; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.account (
    accountid integer NOT NULL,
    currency character varying NOT NULL,
    ledgerid integer NOT NULL
);


ALTER TABLE public.account OWNER TO postgres;

--
-- TOC entry 187 (class 1259 OID 16432)
-- Name: category; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.category (
    categoryid integer NOT NULL,
    ledgerid integer NOT NULL,
    categoryname character varying[] NOT NULL
);


ALTER TABLE public.category OWNER TO postgres;

--
-- TOC entry 186 (class 1259 OID 16424)
-- Name: ledger; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.ledger (
    ledgerid integer NOT NULL,
    userid integer NOT NULL,
    legername character varying[] NOT NULL
);


ALTER TABLE public.ledger OWNER TO postgres;

--
-- TOC entry 190 (class 1259 OID 16456)
-- Name: payee; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.payee (
    payeeid integer NOT NULL,
    ledgerid integer NOT NULL
);


ALTER TABLE public.payee OWNER TO postgres;

--
-- TOC entry 192 (class 1259 OID 16518)
-- Name: test; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.test (
    id integer NOT NULL
);


ALTER TABLE public.test OWNER TO postgres;

--
-- TOC entry 191 (class 1259 OID 16516)
-- Name: test_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.test_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.test_id_seq OWNER TO postgres;

--
-- TOC entry 2191 (class 0 OID 0)
-- Dependencies: 191
-- Name: test_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.test_id_seq OWNED BY public.test.id;


--
-- TOC entry 188 (class 1259 OID 16440)
-- Name: transaction; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.transaction (
    transactionid integer NOT NULL,
    date date NOT NULL,
    account integer NOT NULL,
    "to" integer NOT NULL,
    amount money NOT NULL,
    type character varying NOT NULL,
    payeeid integer NOT NULL,
    categoryid integer NOT NULL,
    note character varying NOT NULL,
    ledgerid integer NOT NULL
);


ALTER TABLE public.transaction OWNER TO postgres;

--
-- TOC entry 185 (class 1259 OID 16416)
-- Name: user; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."user" (
    userid integer NOT NULL,
    username character varying[] NOT NULL,
    email character varying[] NOT NULL
);


ALTER TABLE public."user" OWNER TO postgres;

--
-- TOC entry 2030 (class 2604 OID 16521)
-- Name: test id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.test ALTER COLUMN id SET DEFAULT nextval('public.test_id_seq'::regclass);


--
-- TOC entry 2179 (class 0 OID 16448)
-- Dependencies: 189
-- Data for Name: account; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.account (accountid, currency, ledgerid) FROM stdin;
\.


--
-- TOC entry 2177 (class 0 OID 16432)
-- Dependencies: 187
-- Data for Name: category; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.category (categoryid, ledgerid, categoryname) FROM stdin;
\.


--
-- TOC entry 2176 (class 0 OID 16424)
-- Dependencies: 186
-- Data for Name: ledger; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.ledger (ledgerid, userid, legername) FROM stdin;
\.


--
-- TOC entry 2180 (class 0 OID 16456)
-- Dependencies: 190
-- Data for Name: payee; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.payee (payeeid, ledgerid) FROM stdin;
\.


--
-- TOC entry 2182 (class 0 OID 16518)
-- Dependencies: 192
-- Data for Name: test; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.test (id) FROM stdin;
\.


--
-- TOC entry 2192 (class 0 OID 0)
-- Dependencies: 191
-- Name: test_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.test_id_seq', 1, false);


--
-- TOC entry 2178 (class 0 OID 16440)
-- Dependencies: 188
-- Data for Name: transaction; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.transaction (transactionid, date, account, "to", amount, type, payeeid, categoryid, note, ledgerid) FROM stdin;
\.


--
-- TOC entry 2175 (class 0 OID 16416)
-- Dependencies: 185
-- Data for Name: user; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public."user" (userid, username, email) FROM stdin;
\.


--
-- TOC entry 2047 (class 2606 OID 16455)
-- Name: account account_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.account
    ADD CONSTRAINT account_pkey PRIMARY KEY (accountid);


--
-- TOC entry 2037 (class 2606 OID 16439)
-- Name: category category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.category
    ADD CONSTRAINT category_pkey PRIMARY KEY (categoryid);


--
-- TOC entry 2035 (class 2606 OID 16428)
-- Name: ledger ledger_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ledger
    ADD CONSTRAINT ledger_pkey PRIMARY KEY (ledgerid);


--
-- TOC entry 2049 (class 2606 OID 16460)
-- Name: payee payee_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.payee
    ADD CONSTRAINT payee_pkey PRIMARY KEY (payeeid);


--
-- TOC entry 2045 (class 2606 OID 16447)
-- Name: transaction transaction_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT transaction_pkey PRIMARY KEY (transactionid);


--
-- TOC entry 2032 (class 2606 OID 16423)
-- Name: user user_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."user"
    ADD CONSTRAINT user_pkey PRIMARY KEY (userid);


--
-- TOC entry 2039 (class 1259 OID 16486)
-- Name: fki_account_id_fk; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX fki_account_id_fk ON public.transaction USING btree (account);


--
-- TOC entry 2040 (class 1259 OID 16504)
-- Name: fki_category_id_fk; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX fki_category_id_fk ON public.transaction USING btree (categoryid);


--
-- TOC entry 2041 (class 1259 OID 16515)
-- Name: fki_ledger_id2_fk; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX fki_ledger_id2_fk ON public.transaction USING btree (ledgerid);


--
-- TOC entry 2038 (class 1259 OID 16474)
-- Name: fki_ledger_id_fk; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX fki_ledger_id_fk ON public.category USING btree (ledgerid);


--
-- TOC entry 2042 (class 1259 OID 16498)
-- Name: fki_payee_id_fk; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX fki_payee_id_fk ON public.transaction USING btree (payeeid);


--
-- TOC entry 2043 (class 1259 OID 16492)
-- Name: fki_to_fk; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX fki_to_fk ON public.transaction USING btree ("to");


--
-- TOC entry 2033 (class 1259 OID 16480)
-- Name: fki_user_id_fk; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX fki_user_id_fk ON public.ledger USING btree (userid);


--
-- TOC entry 2052 (class 2606 OID 16481)
-- Name: transaction account_id_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT account_id_fk FOREIGN KEY (account) REFERENCES public.account(accountid) NOT VALID;


--
-- TOC entry 2055 (class 2606 OID 16499)
-- Name: transaction category_id_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT category_id_fk FOREIGN KEY (categoryid) REFERENCES public.category(categoryid) NOT VALID;


--
-- TOC entry 2057 (class 2606 OID 16510)
-- Name: transaction ledger_id2_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT ledger_id2_fk FOREIGN KEY (ledgerid) REFERENCES public.ledger(ledgerid) NOT VALID;


--
-- TOC entry 2051 (class 2606 OID 16469)
-- Name: category ledger_id_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.category
    ADD CONSTRAINT ledger_id_fk FOREIGN KEY (ledgerid) REFERENCES public.ledger(ledgerid) NOT VALID;


--
-- TOC entry 2056 (class 2606 OID 16505)
-- Name: transaction ledger_id_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT ledger_id_fk FOREIGN KEY (ledgerid) REFERENCES public.ledger(ledgerid) NOT VALID;


--
-- TOC entry 2054 (class 2606 OID 16493)
-- Name: transaction payee_id_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT payee_id_fk FOREIGN KEY (payeeid) REFERENCES public.payee(payeeid) NOT VALID;


--
-- TOC entry 2053 (class 2606 OID 16487)
-- Name: transaction to_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT to_fk FOREIGN KEY ("to") REFERENCES public.account(accountid) NOT VALID;


--
-- TOC entry 2050 (class 2606 OID 16475)
-- Name: ledger user_id_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ledger
    ADD CONSTRAINT user_id_fk FOREIGN KEY (userid) REFERENCES public."user"(userid) NOT VALID;


-- Completed on 2020-04-24 19:01:22

--
-- PostgreSQL database dump complete
--

